{% extends "base.html" %}
{% block title %}
  Applicants
{% endblock title %}
{% block body %}
  {% include "components/navbar.html" %}
  <h2 class="text-2xl font-bold text-gray-800 mb-4">Applicants for {{ scholarship.title }}</h2>
<section class="mt-[110px] mx-auto">
  <h2 class="text-2xl font-bold text-gray-800 mb-4">Applicants for {{ scholarship.title }}</h2>
  {% if applications %}
      <table class="min-w-full bg-white border border-gray-300">
          <thead>
              <tr>
                  <th class="border p-2">Name</th>
                  <th class="border p-2">Email</th>
                  <th class="border p-2">Reason</th>
                  <th class="border p-2">Status</th>
                  <th class="border p-2">Actions</th>
              </tr>
          </thead>
          <tbody>
              {% for application in applications %}
              <tr>
                  <td class="border p-2">{{ application.applicant.username }}</td>
                  <td class="border p-2">{{ application.applicant.email }}</td>
                  <td class="border p-2">{{ application.reason }}</td>
                  <td class="border p-2 font-semibold">
                      {{ application.get_status_display }}  <!-- âœ… Correct way to display status -->
                  </td>
                  <td class="border p-2">
                      <form method="POST" action="{% url 'update_application_status' application.id %}">
                          {% csrf_token %}
                          <select name="status" class="border p-1">
                              {% for value, label in application.STATUS_CHOICES %}
                                  <option value="{{ value }}" {% if application.status == value %}selected{% endif %}>
                                      {{ label }}
                                  </option>
                              {% endfor %}
                          </select>
                          <button type="submit" class="px-2 py-1 bg-green-500 text-white rounded">Update</button>
                      </form>
                  </td>
              </tr>
              {% endfor %}
          </tbody>
      </table>
  {% else %}
      <p>No applicants yet.</p>
  {% endif %}
</section>

{% endblock body %}